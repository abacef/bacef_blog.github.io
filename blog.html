<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <div id="skeleton"></div>

    <div id="blog-post-or-list" style="margin-top: 50px; padding: 20px">
        <h1 id="titl"></h1>
        <i><div id="date-published"></div></i>
        <div id="post-content"></div>
    </div>

    <script>
        function populateElementWithFile(elementName, fileName) {
            fetch(fileName)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Unable to get ${fileName}: ${response.status}`);
                    }
                    return response.text()
                })
                .then(html => {
                    document.getElementById(elementName).innerHTML = html;
                })
                .catch(err => {
                    console.warn(err);
                });
        }

        populateElementWithFile("skeleton", "index.html")


        const blogs_map = [
            [2, "Generate your database schema from code", "11 May 2025"],
            [1, "Generate your API objects", "11 May 2025"]
        ]

        const urlParams = new URLSearchParams(window.location.search);
        const postIdStrVal = urlParams.get("post")
        const postId = Number(postIdStrVal);
        var title, datePosted
        for (const entry of blogs_map) {
            if (entry[0] === postId) {
                title = entry[1]
                datePosted = entry[2]
                break;
            }
        }
        if (urlParams.size == 1 && title && datePosted) {
            document.getElementById("titl").innerHTML = title
            document.getElementById("date-published").innerHTML = datePosted
            populateElementWithFile('post-content', `/blog/${postId}.html`)
        } else {
            blog_list = ""

            for (const entry of blogs_map) {
                blog_list += `<a href="/blog.html?post=${entry[0]}">${entry[1]}</a><br><i>${entry[2]}</i><br><br>`
            }

            document.getElementById('blog-post-or-list').innerHTML = `<h1>Blog Posts</h1><br>${blog_list}`;
        }
    </script>
</body>
